<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Admin Dashboard</title>

<link rel="stylesheet" href="./style.css">

<!-- Firebase -->
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-auth-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.22.1/firebase-database-compat.js"></script>
<script src="./firebase.js"></script>
</head>

<body class="dashboard-body">

<!-- HEADER -->
<header class="dashboard-header">
  <h1>ğŸ§‘â€ğŸ’¼ Admin Dashboard</h1>
  <button class="logout-btn" onclick="logout()">Logout</button>
</header>

<!-- TABS -->
<div class="tabs">
  <button class="tab-btn active" onclick="showTeachers()">ğŸ‘©â€ğŸ« Teachers</button>
  <button class="tab-btn" onclick="showStudents()">ğŸ“ Students</button>
</div>

<!-- CONTENT -->
<div class="content">

  <!-- TEACHERS -->
  <div id="teachersSection">
    <h2>All Teachers</h2>
    <div id="teachersList" class="card-container"></div>
  </div>

  <!-- STUDENTS -->
  <div id="studentsSection" style="display:none;">
    <h2>All Students</h2>
    <div id="studentsList" class="card-container"></div>
  </div>

</div>

<script>
const teachersList = document.getElementById("teachersList");
const studentsList = document.getElementById("studentsList");
const teachersSection = document.getElementById("teachersSection");
const studentsSection = document.getElementById("studentsSection");

// Tabs
function showTeachers() {
  teachersSection.style.display = "block";
  studentsSection.style.display = "none";
  document.querySelectorAll(".tab-btn")[0].classList.add("active");
  document.querySelectorAll(".tab-btn")[1].classList.remove("active");
}

function showStudents() {
  teachersSection.style.display = "none";
  studentsSection.style.display = "block";
  document.querySelectorAll(".tab-btn")[1].classList.add("active");
  document.querySelectorAll(".tab-btn")[0].classList.remove("active");
}

// Load Teachers
database.ref("teachers").on("value", snapshot => {
  teachersList.innerHTML = "";
  snapshot.forEach(snap => {
    const t = snap.val();
    teachersList.innerHTML += `
      <div class="card">
        <h3>ğŸ‘©â€ğŸ« ${t.name || "No Name"}</h3>
        <p>${t.email || "No Email"}</p>
        <small>Classes: ${t.classes ? Object.keys(t.classes).join(", ") : "None"}</small>
      </div>
    `;
  });
});

// Load Students
database.ref("students").on("value", snapshot => {
  studentsList.innerHTML = "";
  snapshot.forEach(snap => {
    const s = snap.val();
    studentsList.innerHTML += `
      <div class="card">
        <h3>ğŸ“ ${s.name || "Student"}</h3>
        <p>Roll No: ${s.rollNumber || snap.key}</p>
      </div>
    `;
  });
});

function logout() {
  firebase.auth().signOut().then(() => {
    window.location.href = "index.html";
  });
}
</script>

</body>
</html>
